## CodeRabbit Review Loop

This is an automated review loop. Follow these steps:

### 1. Wait for CodeRabbit CI to complete
Run `uv run python scripts/review_wait.py` to poll for CodeRabbit CI completion.
- Waits 10s for CI to start (in case called right after push)
- Polls every 15s until CI completes
- Times out after 10 minutes
- Exits immediately if no CI is in progress

### 2. Fetch and address comments
Once CI completes:
1. Run `uv run python scripts/review_comments.py` to fetch comments into `.reviews/prComments.md`
2. Review all comments critically - not all may be valid or apply to our codebase
3. ASK BACK the user for decisions if needed before implementing fixes
4. Address valid issues
5. Resolve threads via the `gh api graphql` mutation shown in the file (in both cases, if you addressed or rejected it)

### 3. Verify and commit
1. Run `uv run python scripts/review_comments.py` to verify no unresolved comments remain
2. Run `uv run ruff format`, `uv run ruff check`, `uv run pyright`, `uv run pytest` to ensure code quality
3. Commit and push changes

### 4. Loop
Go back to step 1 - wait for the next CodeRabbit review triggered by the push.

**Exit condition**: When `uv run python scripts/review_comments.py` shows no comments. Give a brief high level summary of what was addressed.
